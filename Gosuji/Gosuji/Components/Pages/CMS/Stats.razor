@page "/cms/stats"
@rendermode @(new InteractiveServerRenderMode(prerender: false))
@layout CMSLayout

@using Gosuji.Client.Components.Shared
@using Gosuji.Components.Shared.CMS
@using Gosuji.Components.Shared.CMS.Stats
@using Gosuji.Components.Shared.Errors

<PageTitle>CMS Stats</PageTitle>

<AuthorizeView>
    <Authorized>
        <AuthorizeView Roles="Owner">
            <Authorized Context="a">

                <div id="cmsStatsPage">
                    <div class="cmsFlexContainer">
                        <div class="cmsFlexItem">
                            <CUserChart GraphDays="graphDays" GraphMonths="graphMonths" DayLabels="dayLabels" MonthLabels="monthLabels" />
                        </div>
                        <div class="cmsFlexItem">
                            <CSubChart GraphDays="graphDays" GraphMonths="graphMonths" DayLabels="dayLabels" MonthLabels="monthLabels" />
                        </div>
                    </div>
                </div>

            </Authorized>
            <NotAuthorized Context="a">
                <Unauthorized />
            </NotAuthorized>
        </AuthorizeView>
    </Authorized>
    <NotAuthorized>
        <CRedirect URI="Account/Login" />
    </NotAuthorized>
</AuthorizeView>
